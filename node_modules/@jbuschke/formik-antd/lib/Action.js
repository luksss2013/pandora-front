"use strict";
var _this = this;
exports.__esModule = true;
var tslib_1 = require("tslib");
var React = tslib_1.__importStar(require("react"));
var antd_1 = require("antd");
exports.Action = function (_a) {
    var onExecute = _a.onExecute, onError = _a.onError, onSuccess = _a.onSuccess, children = _a.children, _b = _a.showSuccess, showSuccess = _b === void 0 ? true : _b, _c = _a.showError, showError = _c === void 0 ? true : _c;
    var _d = React.useState(false), loading = _d[0], setLoading = _d[1];
    return (React.createElement(antd_1.Button, { loading: loading, onClick: function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {
            var E_1;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, 3, 4]);
                        setLoading(true);
                        return [4 /*yield*/, onExecute()];
                    case 1:
                        _a.sent();
                        if (onSuccess) {
                            onSuccess();
                        }
                        else if (showSuccess) {
                            antd_1.message.success("success");
                        }
                        return [3 /*break*/, 4];
                    case 2:
                        E_1 = _a.sent();
                        if (onError) {
                            onError(E_1);
                        }
                        else if (showError) {
                            antd_1.notification.error({ message: E_1.toString(), duration: 0 });
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        setLoading(false);
                        return [7 /*endfinally*/];
                    case 4: return [2 /*return*/];
                }
            });
        }); } }, children));
};
//# sourceMappingURL=Action.js.map